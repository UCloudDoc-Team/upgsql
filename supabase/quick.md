
# 1. 准备工作

## 1. 创建Supabase实例

## 2. 获取API凭证

1. 选中Supabase实例，点击详情按钮。

2. 开启外网访问能力，并将客户端IP地址添加进白名单。

3. 点击前往查看，即可进入Supabase登陆页面

4. 输入默认用户Supabase及其密码，登录至Supabase项目。

5. 单击Connect，在弹出的Connect to your project页面中，单击App Frameworks，即可获得Supabase URL和Supabase Key。    

## 3. 准备数据表

```SQL
create table todos (
  id bigint generated by default as identity primary key,
  task text not null,
  is_complete boolean default false,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);
```

# 2. 安装SDK

```bash
pip install supabase
```

# 3. 代码实现

```Python
import os
from supabase import create_client, Client
from dotenv import load_dotenv

load_dotenv()

url: str = os.environ.get("SUPABASE_URL")
key: str = os.environ.get("SUPABASE_KEY")
supabase: Client = create_client(url, key)

def run_demo():
    # --- 插入数据 ---
    print("正在插入数据...")
    data, count = supabase.table("todos").insert({"task": "学习 Supabase Python SDK"}).execute()
    
    # --- 查询数据 ---
    print("查询所有任务:")
    response = supabase.table("todos").select("*").execute()
    for row in response.data:
        print(f"ID: {row['id']} | 任务: {row['task']} | 完成状态: {row['is_complete']}")

    # --- 更新数据 ---
    if response.data:
        todo_id = response.data[0]['id']
        supabase.table("todos").update({"is_complete": True}).eq("id", todo_id).execute()
        print(f"\n已将 ID {todo_id} 标记为完成。")

    # --- 再次查询数据 ---
    print("查询所有任务:")
    response = supabase.table("todos").select("*").execute()
    for row in response.data:
        print(f"ID: {row['id']} | 任务: {row['task']} | 完成状态: {row['is_complete']}")

if __name__ == "__main__":
    run_demo()
```


更多内容，请参见：https://supabase.com/docs